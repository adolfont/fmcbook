\draw [rounded corners=0mm, fill=white]
      (-3,1)--(-3,-1)--(3,-1)--(3,1)--cycle;
\draw [rounded corners=0mm, fill=gray!10]
      (1,0.5)--(1,-0.5)--(2,-0.5)--(2,0.5)--cycle;
\draw [rounded corners=0mm, fill=gray!10]
      (-1,0.5)--(-1,-0.5)--(-2,-0.5)--(-2,0.5)--cycle;
\draw[-Latex]  (4,0)  -- (2,0);
\draw[-Latex]  (1,0)  -- (-1,0);
\draw[-Latex]  (-2,0) -- (-4,0);
\node (x)   at (4.5,0)    {$x$};
\node (f)   at (1.5,0)    {$f$};
\node (g)   at (-1.5,0)   {$g$};
\node (gfx) at (-4.8,0)   {$g(f(x))$};
\node (fS)  at (1.8,0.3)  {$A$};
\node (fT)  at (1.2,0.3)  {$B$};
\node (gS)  at (-1.2,0.3) {$B$};
\node (gT)  at (-1.8,0.3) {$C$};
